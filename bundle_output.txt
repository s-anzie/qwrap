# ===== FILE: logs/agent001.log =====
time=2025-06-16T09:29:39.753+02:00 level=INFO msg="qwrap agent starting up..." agent_id=agent001 listen_addr_config=localhost:8080 data_dir=/home/bradley/work/qwrap/agent_data/agent001 orchestrator=localhost:7878
time=2025-06-16T09:29:39.753+02:00 level=WARN msg="No TLS cert/key files provided for ChunkServer, generating self-signed (INSECURE)" agent_id=agent001
time=2025-06-16T09:29:40.025+02:00 level=INFO msg="ChunkServer attempting to start..." agent_id=agent001
time=2025-06-16T09:29:40.025+02:00 level=INFO msg="failed to sufficiently increase receive buffer size (was: 208 kiB, wanted: 7168 kiB, got: 416 kiB). See https://github.com/quic-go/quic-go/wiki/UDP-Buffer-Sizes for details."
time=2025-06-16T09:29:40.025+02:00 level=INFO msg="ChunkServer started, listening" agent_id=agent001 address=127.0.0.1:8080
time=2025-06-16T09:29:42.026+02:00 level=INFO msg="ChunkServer is listening on" agent_id=agent001 actual_address=127.0.0.1:8080
time=2025-06-16T09:29:42.026+02:00 level=INFO msg="Agent attempting to connect to orchestrator" agent_id=agent001 subcomponent=agent_orch_comms address=localhost:7878
time=2025-06-16T09:29:42.030+02:00 level=INFO msg="Agent successfully connected to orchestrator" agent_id=agent001 subcomponent=agent_orch_comms address=localhost:7878
time=2025-06-16T09:29:42.030+02:00 level=DEBUG msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" agent_id=agent001 subcomponent=agent_orch_comms stream_id=0 operation=register
time=2025-06-16T09:29:42.031+02:00 level=INFO msg="Agent successfully registered with orchestrator" agent_id=agent001 reported_listen_addr=127.0.0.1:8080
time=2025-06-16T09:29:42.031+02:00 level=INFO msg="Heartbeat interval set" agent_id=agent001 interval=10s
time=2025-06-16T09:29:42.031+02:00 level=INFO msg="Agent is running. Press Ctrl+C to exit." agent_id=agent001
time=2025-06-16T09:29:42.031+02:00 level=INFO msg="Heartbeat loop started" agent_id=agent001
time=2025-06-16T09:29:47.813+02:00 level=INFO msg="Accepted new QUIC connection" agent_id=agent001 remote_addr=127.0.0.1:43668
time=2025-06-16T09:29:47.813+02:00 level=DEBUG msg="Agent handling new connection" agent_id=agent001 remote_addr=127.0.0.1:43668
time=2025-06-16T09:29:47.813+02:00 level=DEBUG msg="Agent accepted new stream on connection" agent_id=agent001 remote_addr=127.0.0.1:43668 stream_id=0
time=2025-06-16T09:29:47.813+02:00 level=DEBUG msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" agent_id=agent001 remote_addr=127.0.0.1:43668 stream_id=0
time=2025-06-16T09:29:47.813+02:00 level=INFO msg="Agent stream received purpose" agent_id=agent001 remote_addr=127.0.0.1:43668 stream_id=0 purpose=GET_FILE_METADATA_REQUEST
time=2025-06-16T09:29:47.813+02:00 level=INFO msg="Processing GetFileMetadataRequest from orchestrator" agent_id=agent001 handler=GetFileMetadataRequest stream_id=0 remote_addr=127.0.0.1:43668 request_id=orch-meta-testfile_10M.dat-agent001 file_id=testfile_10M.dat
time=2025-06-16T09:29:47.858+02:00 level=INFO msg="Calculated SHA256 checksum for metadata response" agent_id=agent001 handler=GetFileMetadataRequest stream_id=0 remote_addr=127.0.0.1:43668 file_id=testfile_10M.dat checksum_val=10630ea813bf9afb376d98027a5e62a5f723141d7e5597fda35f65c300ba5cd3 bytes_hashed=10485760
time=2025-06-16T09:29:47.859+02:00 level=INFO msg="GetFileMetadataResponse sent" agent_id=agent001 handler=GetFileMetadataRequest stream_id=0 remote_addr=127.0.0.1:43668 request_id=orch-meta-testfile_10M.dat-agent001 file_id=testfile_10M.dat found=true
time=2025-06-16T09:29:47.859+02:00 level=DEBUG msg="Agent connection closed or context cancelled while accepting stream" agent_id=agent001 remote_addr=127.0.0.1:43668 error="Application error 0x0 (remote): metadata query session finished"
time=2025-06-16T09:29:47.859+02:00 level=DEBUG msg="Closed QUIC connection post-handling (agent)" agent_id=agent001 remote_addr=127.0.0.1:43668
time=2025-06-16T09:29:47.866+02:00 level=INFO msg="Accepted new QUIC connection" agent_id=agent001 remote_addr=127.0.0.1:32998
time=2025-06-16T09:29:47.866+02:00 level=DEBUG msg="Agent handling new connection" agent_id=agent001 remote_addr=127.0.0.1:32998
time=2025-06-16T09:29:47.866+02:00 level=DEBUG msg="Agent accepted new stream on connection" agent_id=agent001 remote_addr=127.0.0.1:32998 stream_id=0
time=2025-06-16T09:29:47.866+02:00 level=DEBUG msg="Agent accepted new stream on connection" agent_id=agent001 remote_addr=127.0.0.1:32998 stream_id=4
time=2025-06-16T09:29:47.866+02:00 level=DEBUG msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" agent_id=agent001 remote_addr=127.0.0.1:32998 stream_id=4
time=2025-06-16T09:29:47.866+02:00 level=DEBUG msg="Failed to read StreamPurposeRequest on agent stream (EOF/Closed/Cancelled)" agent_id=agent001 remote_addr=127.0.0.1:32998 stream_id=4 error=EOF
time=2025-06-16T09:29:47.866+02:00 level=DEBUG msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" agent_id=agent001 remote_addr=127.0.0.1:32998 stream_id=0
time=2025-06-16T09:29:47.866+02:00 level=INFO msg="Agent stream received purpose" agent_id=agent001 remote_addr=127.0.0.1:32998 stream_id=0 purpose=PURPOSE_UNKNOWN
time=2025-06-16T09:29:47.866+02:00 level=WARN msg="Agent received unhandled or unexpected stream purpose" agent_id=agent001 remote_addr=127.0.0.1:32998 stream_id=0 purpose=PURPOSE_UNKNOWN
time=2025-06-16T09:29:47.866+02:00 level=DEBUG msg="Agent accepted new stream on connection" agent_id=agent001 remote_addr=127.0.0.1:32998 stream_id=8
time=2025-06-16T09:29:47.866+02:00 level=DEBUG msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" agent_id=agent001 remote_addr=127.0.0.1:32998 stream_id=8
time=2025-06-16T09:29:47.866+02:00 level=DEBUG msg="Failed to read StreamPurposeRequest on agent stream (EOF/Closed/Cancelled)" agent_id=agent001 remote_addr=127.0.0.1:32998 stream_id=8 error=EOF
time=2025-06-16T09:29:47.866+02:00 level=DEBUG msg="Agent accepted new stream on connection" agent_id=agent001 remote_addr=127.0.0.1:32998 stream_id=12
time=2025-06-16T09:29:47.866+02:00 level=DEBUG msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" agent_id=agent001 remote_addr=127.0.0.1:32998 stream_id=12
time=2025-06-16T09:29:47.866+02:00 level=DEBUG msg="Failed to read StreamPurposeRequest on agent stream (EOF/Closed/Cancelled)" agent_id=agent001 remote_addr=127.0.0.1:32998 stream_id=12 error=EOF
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="Received signal, shutting down agent..." agent_id=agent001 signal=terminated
time=2025-06-16T09:29:47.949+02:00 level=DEBUG msg="Agent connection closed or context cancelled while accepting stream" agent_id=agent001 remote_addr=127.0.0.1:32998 error="context canceled"
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="ChunkServer listener accept loop ending." agent_id=agent001 reason="context canceled"
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="ChunkServer Start goroutine finished." agent_id=agent001
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="Context cancelled, stopping ChunkServer listener..." agent_id=agent001
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="Agent shutting down main process..." agent_id=agent001
time=2025-06-16T09:29:47.949+02:00 level=DEBUG msg="Closed QUIC connection post-handling (agent)" agent_id=agent001 remote_addr=127.0.0.1:32998
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="Heartbeat loop stopping." agent_id=agent001
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="Closed agent connection to orchestrator." agent_id=agent001 subcomponent=agent_orch_comms
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="Agent shutdown complete." agent_id=agent001
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="Closed agent connection to orchestrator." agent_id=agent001 subcomponent=agent_orch_comms


# ===== FILE: logs/client.log =====
time=2025-06-16T09:29:47.793+02:00 level=INFO source=/home/bradley/work/qwrap/cmd/client/main.go:63 msg="qwrap client starting" orchestrator=localhost:7878 file_id=testfile_10M.dat destination=/home/bradley/work/qwrap/downloaded_output_testfile_10M.dat
time=2025-06-16T09:29:47.794+02:00 level=INFO source=/home/bradley/work/qwrap/internal/client/orchestratorclient/quic_comms.go:100 msg="Attempting to connect to orchestrator..." component=quic_orchestrator_comms orch_addr=localhost:7878
time=2025-06-16T09:29:47.795+02:00 level=INFO source=:0 msg="failed to sufficiently increase receive buffer size (was: 208 kiB, wanted: 7168 kiB, got: 416 kiB). See https://github.com/quic-go/quic-go/wiki/UDP-Buffer-Sizes for details."
time=2025-06-16T09:29:47.802+02:00 level=INFO source=/home/bradley/work/qwrap/internal/client/orchestratorclient/quic_comms.go:114 msg="Successfully connected to orchestrator." component=quic_orchestrator_comms orch_addr=localhost:7878
time=2025-06-16T09:29:47.802+02:00 level=INFO source=/home/bradley/work/qwrap/cmd/client/main.go:153 msg="Client prepared TransferRequest, FileID only" file_id=testfile_10M.dat request_id=client-req-1750058987802649306
time=2025-06-16T09:29:47.802+02:00 level=INFO source=/home/bradley/work/qwrap/cmd/client/main.go:156 msg="Initiating download process..." file_id=testfile_10M.dat
time=2025-06-16T09:29:47.802+02:00 level=INFO source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:210 msg="Downloader lifecycle started" component=downloader request_id=client-req-1750058987802649306 op=manageDownloadLifecycle
time=2025-06-16T09:29:47.803+02:00 level=INFO source=/home/bradley/work/qwrap/internal/client/orchestratorclient/quic_comms.go:204 msg="Requesting initial plan from orchestrator" component=quic_orchestrator_comms orch_addr=localhost:7878 request_id=client-req-1750058987802649306
time=2025-06-16T09:29:47.803+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/framing/framing.go:193 msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" component=quic_orchestrator_comms orch_addr=localhost:7878 stream_id=0 purpose=TRANSFER_REQUEST role=reader
time=2025-06-16T09:29:47.860+02:00 level=INFO source=/home/bradley/work/qwrap/internal/client/orchestratorclient/quic_comms.go:215 msg="Initial plan received successfully from orchestrator" component=quic_orchestrator_comms orch_addr=localhost:7878 plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 num_assignments=10
time=2025-06-16T09:29:47.860+02:00 level=INFO source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:274 msg="Initial transfer plan received" component=downloader request_id=client-req-1750058987802649306 op=manageDownloadLifecycle plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 file_id=testfile_10M.dat num_chunks=10
time=2025-06-16T09:29:47.860+02:00 level=INFO source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:337 msg="Starting listener for updated plans from orchestrator" component=downloader request_id=client-req-1750058987802649306 op=manageDownloadLifecycle plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 file_id=testfile_10M.dat
time=2025-06-16T09:29:47.860+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:795 msg="Download worker started" component=downloader id=6
time=2025-06-16T09:29:47.860+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:812 msg="Worker picked up job" component=downloader worker_id=6 file_id=testfile_10M.dat chunk_id=0 agent_addr=127.0.0.1:8080 attempt_for_assignment=1
time=2025-06-16T09:29:47.860+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:795 msg="Download worker started" component=downloader id=2
time=2025-06-16T09:29:47.860+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/manager/connection_manager.go:194 msg="Attempting to dial QUIC connection" address=127.0.0.1:8080 attempt=1
time=2025-06-16T09:29:47.860+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:812 msg="Worker picked up job" component=downloader worker_id=2 file_id=testfile_10M.dat chunk_id=1 agent_addr=127.0.0.1:8081 attempt_for_assignment=1
time=2025-06-16T09:29:47.860+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:795 msg="Download worker started" component=downloader id=7
time=2025-06-16T09:29:47.860+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:795 msg="Download worker started" component=downloader id=8
time=2025-06-16T09:29:47.860+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:812 msg="Worker picked up job" component=downloader worker_id=7 file_id=testfile_10M.dat chunk_id=2 agent_addr=127.0.0.1:8082 attempt_for_assignment=1
time=2025-06-16T09:29:47.860+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:812 msg="Worker picked up job" component=downloader worker_id=8 file_id=testfile_10M.dat chunk_id=3 agent_addr=127.0.0.1:8080 attempt_for_assignment=1
time=2025-06-16T09:29:47.860+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:795 msg="Download worker started" component=downloader id=1
time=2025-06-16T09:29:47.860+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:795 msg="Download worker started" component=downloader id=3
time=2025-06-16T09:29:47.860+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:795 msg="Download worker started" component=downloader id=9
time=2025-06-16T09:29:47.860+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:812 msg="Worker picked up job" component=downloader worker_id=1 file_id=testfile_10M.dat chunk_id=4 agent_addr=127.0.0.1:8081 attempt_for_assignment=1
time=2025-06-16T09:29:47.860+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:812 msg="Worker picked up job" component=downloader worker_id=9 file_id=testfile_10M.dat chunk_id=6 agent_addr=127.0.0.1:8080 attempt_for_assignment=1
time=2025-06-16T09:29:47.860+02:00 level=INFO source=/home/bradley/work/qwrap/internal/client/orchestratorclient/quic_comms.go:244 msg="Opened stream for plan updates" component=quic_orchestrator_comms orch_addr=localhost:7878 plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 stream_id=4
time=2025-06-16T09:29:47.860+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:795 msg="Download worker started" component=downloader id=5
time=2025-06-16T09:29:47.860+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:795 msg="Download worker started" component=downloader id=4
time=2025-06-16T09:29:47.860+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:812 msg="Worker picked up job" component=downloader worker_id=5 file_id=testfile_10M.dat chunk_id=7 agent_addr=127.0.0.1:8081 attempt_for_assignment=1
time=2025-06-16T09:29:47.860+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/framing/framing.go:193 msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" component=quic_orchestrator_comms orch_addr=localhost:7878 plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 update_stream_id=4 role=reader
time=2025-06-16T09:29:47.860+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:795 msg="Download worker started" component=downloader id=0
time=2025-06-16T09:29:47.860+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:812 msg="Worker picked up job" component=downloader worker_id=0 file_id=testfile_10M.dat chunk_id=8 agent_addr=127.0.0.1:8082 attempt_for_assignment=1
time=2025-06-16T09:29:47.860+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/orchestratorclient/quic_comms.go:264 msg="Sent registration request for plan updates" component=quic_orchestrator_comms orch_addr=localhost:7878 plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4
time=2025-06-16T09:29:47.860+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:812 msg="Worker picked up job" component=downloader worker_id=3 file_id=testfile_10M.dat chunk_id=5 agent_addr=127.0.0.1:8082 attempt_for_assignment=1
time=2025-06-16T09:29:47.860+02:00 level=INFO source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:346 msg="Stopped listening for updated plans." component=downloader request_id=client-req-1750058987802649306 op=manageDownloadLifecycle plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 file_id=testfile_10M.dat
time=2025-06-16T09:29:47.861+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:812 msg="Worker picked up job" component=downloader worker_id=4 file_id=testfile_10M.dat chunk_id=9 agent_addr=127.0.0.1:8080 attempt_for_assignment=1
time=2025-06-16T09:29:47.865+02:00 level=INFO source=/home/bradley/work/qwrap/internal/client/manager/connection_manager.go:201 msg="Successfully established QUIC connection" address=127.0.0.1:8080
time=2025-06-16T09:29:47.867+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/manager/connection_manager.go:194 msg="Attempting to dial QUIC connection" address=127.0.0.1:8081 attempt=1
time=2025-06-16T09:29:47.868+02:00 level=WARN source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:961 msg="Incomplete chunk received" component=downloader worker_id=6 chunk_id=0 agent_addr=127.0.0.1:8080 expected_size=1048576 received_size=0
time=2025-06-16T09:29:47.868+02:00 level=WARN source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:449 msg="Chunk download attempt failed" component=downloader request_id=client-req-1750058987802649306 op=manageDownloadLifecycle plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 file_id=testfile_10M.dat chunk_id=0 agent=agent001 attempt_on_assign=1 total_local_attempts_for_chunk=1 error="incomplete chunk 0 from 127.0.0.1:8080: got 0, want 1048576: EOF"
time=2025-06-16T09:29:47.868+02:00 level=WARN source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:472 msg="Max local retries on current assignment. Requesting reassignment." component=downloader request_id=client-req-1750058987802649306 op=manageDownloadLifecycle plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 file_id=testfile_10M.dat chunk_id=0 agent=agent001
time=2025-06-16T09:29:47.868+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/orchestratorclient/quic_comms.go:220 msg="Reporting transfer status" component=quic_orchestrator_comms orch_addr=localhost:7878 plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 num_chunk_statuses=1
time=2025-06-16T09:29:47.868+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/orchestratorclient/quic_comms.go:220 msg="Reporting transfer status" component=quic_orchestrator_comms orch_addr=localhost:7878 plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 num_chunk_statuses=1
time=2025-06-16T09:29:47.868+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/framing/framing.go:193 msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" component=quic_orchestrator_comms orch_addr=localhost:7878 stream_id=8 purpose=CLIENT_REPORT role=reader
time=2025-06-16T09:29:47.868+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/framing/framing.go:193 msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" component=quic_orchestrator_comms orch_addr=localhost:7878 stream_id=12 purpose=CLIENT_REPORT role=reader
time=2025-06-16T09:29:47.868+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:682 msg="Successfully reported chunk status to orchestrator" component=downloader plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 chunk_id=0 event=REASSIGNMENT_REQUESTED
time=2025-06-16T09:29:47.869+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/downloader/downloader.go:682 msg="Successfully reported chunk status to orchestrator" component=downloader plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 chunk_id=0 event=DOWNLOAD_FAILED_TRANSFER_ERROR
time=2025-06-16T09:29:47.871+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/client/orchestratorclient/quic_comms.go:306 msg="Client received updated plan from orchestrator" component=quic_orchestrator_comms orch_addr=localhost:7878 plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 num_new_assign=1
time=2025-06-16T09:29:47.871+02:00 level=INFO source=/usr/local/go/src/runtime/panic.go:792 msg="Plan update listener goroutine stopped" component=quic_orchestrator_comms orch_addr=localhost:7878 plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 stream_id=4
panic: send on closed channel

goroutine 26 [running]:
qwrap/internal/client/orchestratorclient.(*quicCommsImpl).ListenForUpdatedPlans.func1()
	/home/bradley/work/qwrap/internal/client/orchestratorclient/quic_comms.go:307 +0x3eb
created by qwrap/internal/client/orchestratorclient.(*quicCommsImpl).ListenForUpdatedPlans in goroutine 60
	/home/bradley/work/qwrap/internal/client/orchestratorclient/quic_comms.go:268 +0x76c


# ===== FILE: logs/agent003.log =====
time=2025-06-16T09:29:41.782+02:00 level=INFO msg="qwrap agent starting up..." agent_id=agent003 listen_addr_config=localhost:8082 data_dir=/home/bradley/work/qwrap/agent_data/agent003 orchestrator=localhost:7878
time=2025-06-16T09:29:41.783+02:00 level=WARN msg="No TLS cert/key files provided for ChunkServer, generating self-signed (INSECURE)" agent_id=agent003
time=2025-06-16T09:29:42.015+02:00 level=INFO msg="ChunkServer attempting to start..." agent_id=agent003
time=2025-06-16T09:29:42.016+02:00 level=INFO msg="failed to sufficiently increase receive buffer size (was: 208 kiB, wanted: 7168 kiB, got: 416 kiB). See https://github.com/quic-go/quic-go/wiki/UDP-Buffer-Sizes for details."
time=2025-06-16T09:29:42.016+02:00 level=INFO msg="ChunkServer started, listening" agent_id=agent003 address=127.0.0.1:8082
time=2025-06-16T09:29:44.015+02:00 level=INFO msg="ChunkServer is listening on" agent_id=agent003 actual_address=127.0.0.1:8082
time=2025-06-16T09:29:44.016+02:00 level=INFO msg="Agent attempting to connect to orchestrator" agent_id=agent003 subcomponent=agent_orch_comms address=localhost:7878
time=2025-06-16T09:29:44.027+02:00 level=INFO msg="Agent successfully connected to orchestrator" agent_id=agent003 subcomponent=agent_orch_comms address=localhost:7878
time=2025-06-16T09:29:44.027+02:00 level=DEBUG msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" agent_id=agent003 subcomponent=agent_orch_comms stream_id=0 operation=register
time=2025-06-16T09:29:44.029+02:00 level=INFO msg="Agent successfully registered with orchestrator" agent_id=agent003 reported_listen_addr=127.0.0.1:8082
time=2025-06-16T09:29:44.029+02:00 level=INFO msg="Heartbeat interval set" agent_id=agent003 interval=10s
time=2025-06-16T09:29:44.029+02:00 level=INFO msg="Agent is running. Press Ctrl+C to exit." agent_id=agent003
time=2025-06-16T09:29:44.029+02:00 level=INFO msg="Heartbeat loop started" agent_id=agent003
time=2025-06-16T09:29:47.817+02:00 level=INFO msg="Accepted new QUIC connection" agent_id=agent003 remote_addr=127.0.0.1:58901
time=2025-06-16T09:29:47.817+02:00 level=DEBUG msg="Agent handling new connection" agent_id=agent003 remote_addr=127.0.0.1:58901
time=2025-06-16T09:29:47.817+02:00 level=DEBUG msg="Agent accepted new stream on connection" agent_id=agent003 remote_addr=127.0.0.1:58901 stream_id=0
time=2025-06-16T09:29:47.817+02:00 level=DEBUG msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" agent_id=agent003 remote_addr=127.0.0.1:58901 stream_id=0
time=2025-06-16T09:29:47.817+02:00 level=INFO msg="Agent stream received purpose" agent_id=agent003 remote_addr=127.0.0.1:58901 stream_id=0 purpose=GET_FILE_METADATA_REQUEST
time=2025-06-16T09:29:47.817+02:00 level=INFO msg="Processing GetFileMetadataRequest from orchestrator" agent_id=agent003 handler=GetFileMetadataRequest stream_id=0 remote_addr=127.0.0.1:58901 request_id=orch-meta-testfile_10M.dat-agent003 file_id=testfile_10M.dat
time=2025-06-16T09:29:47.817+02:00 level=WARN msg="File not found for metadata" agent_id=agent003 file_id=testfile_10M.dat path=/home/bradley/work/qwrap/agent_data/agent003/testfile_10M.dat
time=2025-06-16T09:29:47.817+02:00 level=INFO msg="File not found by agent for metadata request" agent_id=agent003 handler=GetFileMetadataRequest stream_id=0 remote_addr=127.0.0.1:58901 file_id=testfile_10M.dat
time=2025-06-16T09:29:47.817+02:00 level=INFO msg="GetFileMetadataResponse sent" agent_id=agent003 handler=GetFileMetadataRequest stream_id=0 remote_addr=127.0.0.1:58901 request_id=orch-meta-testfile_10M.dat-agent003 file_id=testfile_10M.dat found=false
time=2025-06-16T09:29:47.818+02:00 level=DEBUG msg="Agent connection closed or context cancelled while accepting stream" agent_id=agent003 remote_addr=127.0.0.1:58901 error="Application error 0x0 (remote): metadata query session finished"
time=2025-06-16T09:29:47.818+02:00 level=DEBUG msg="Closed QUIC connection post-handling (agent)" agent_id=agent003 remote_addr=127.0.0.1:58901
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="Received signal, shutting down agent..." agent_id=agent003 signal=terminated
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="Context cancelled, stopping ChunkServer listener..." agent_id=agent003
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="Heartbeat loop stopping." agent_id=agent003
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="Agent shutting down main process..." agent_id=agent003
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="ChunkServer listener accept loop ending." agent_id=agent003 reason="context canceled"
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="ChunkServer Start goroutine finished." agent_id=agent003
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="Closed agent connection to orchestrator." agent_id=agent003 subcomponent=agent_orch_comms
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="Agent shutdown complete." agent_id=agent003
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="Closed agent connection to orchestrator." agent_id=agent003 subcomponent=agent_orch_comms


# ===== FILE: logs/agent002.log =====
time=2025-06-16T09:29:40.759+02:00 level=INFO msg="qwrap agent starting up..." agent_id=agent002 listen_addr_config=localhost:8081 data_dir=/home/bradley/work/qwrap/agent_data/agent002 orchestrator=localhost:7878
time=2025-06-16T09:29:40.759+02:00 level=WARN msg="No TLS cert/key files provided for ChunkServer, generating self-signed (INSECURE)" agent_id=agent002
time=2025-06-16T09:29:41.174+02:00 level=INFO msg="ChunkServer attempting to start..." agent_id=agent002
time=2025-06-16T09:29:41.175+02:00 level=INFO msg="failed to sufficiently increase receive buffer size (was: 208 kiB, wanted: 7168 kiB, got: 416 kiB). See https://github.com/quic-go/quic-go/wiki/UDP-Buffer-Sizes for details."
time=2025-06-16T09:29:41.175+02:00 level=INFO msg="ChunkServer started, listening" agent_id=agent002 address=127.0.0.1:8081
time=2025-06-16T09:29:43.175+02:00 level=INFO msg="ChunkServer is listening on" agent_id=agent002 actual_address=127.0.0.1:8081
time=2025-06-16T09:29:43.175+02:00 level=INFO msg="Agent attempting to connect to orchestrator" agent_id=agent002 subcomponent=agent_orch_comms address=localhost:7878
time=2025-06-16T09:29:43.192+02:00 level=INFO msg="Agent successfully connected to orchestrator" agent_id=agent002 subcomponent=agent_orch_comms address=localhost:7878
time=2025-06-16T09:29:43.192+02:00 level=DEBUG msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" agent_id=agent002 subcomponent=agent_orch_comms stream_id=0 operation=register
time=2025-06-16T09:29:43.194+02:00 level=INFO msg="Agent successfully registered with orchestrator" agent_id=agent002 reported_listen_addr=127.0.0.1:8081
time=2025-06-16T09:29:43.194+02:00 level=INFO msg="Heartbeat interval set" agent_id=agent002 interval=10s
time=2025-06-16T09:29:43.194+02:00 level=INFO msg="Agent is running. Press Ctrl+C to exit." agent_id=agent002
time=2025-06-16T09:29:43.194+02:00 level=INFO msg="Heartbeat loop started" agent_id=agent002
time=2025-06-16T09:29:47.816+02:00 level=INFO msg="Accepted new QUIC connection" agent_id=agent002 remote_addr=127.0.0.1:39913
time=2025-06-16T09:29:47.816+02:00 level=DEBUG msg="Agent handling new connection" agent_id=agent002 remote_addr=127.0.0.1:39913
time=2025-06-16T09:29:47.816+02:00 level=DEBUG msg="Agent accepted new stream on connection" agent_id=agent002 remote_addr=127.0.0.1:39913 stream_id=0
time=2025-06-16T09:29:47.816+02:00 level=DEBUG msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" agent_id=agent002 remote_addr=127.0.0.1:39913 stream_id=0
time=2025-06-16T09:29:47.816+02:00 level=INFO msg="Agent stream received purpose" agent_id=agent002 remote_addr=127.0.0.1:39913 stream_id=0 purpose=GET_FILE_METADATA_REQUEST
time=2025-06-16T09:29:47.816+02:00 level=INFO msg="Processing GetFileMetadataRequest from orchestrator" agent_id=agent002 handler=GetFileMetadataRequest stream_id=0 remote_addr=127.0.0.1:39913 request_id=orch-meta-testfile_10M.dat-agent002 file_id=testfile_10M.dat
time=2025-06-16T09:29:47.816+02:00 level=WARN msg="File not found for metadata" agent_id=agent002 file_id=testfile_10M.dat path=/home/bradley/work/qwrap/agent_data/agent002/testfile_10M.dat
time=2025-06-16T09:29:47.816+02:00 level=INFO msg="File not found by agent for metadata request" agent_id=agent002 handler=GetFileMetadataRequest stream_id=0 remote_addr=127.0.0.1:39913 file_id=testfile_10M.dat
time=2025-06-16T09:29:47.816+02:00 level=INFO msg="GetFileMetadataResponse sent" agent_id=agent002 handler=GetFileMetadataRequest stream_id=0 remote_addr=127.0.0.1:39913 request_id=orch-meta-testfile_10M.dat-agent002 file_id=testfile_10M.dat found=false
time=2025-06-16T09:29:47.817+02:00 level=DEBUG msg="Agent connection closed or context cancelled while accepting stream" agent_id=agent002 remote_addr=127.0.0.1:39913 error="Application error 0x0 (remote): metadata query session finished"
time=2025-06-16T09:29:47.817+02:00 level=DEBUG msg="Closed QUIC connection post-handling (agent)" agent_id=agent002 remote_addr=127.0.0.1:39913
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="Received signal, shutting down agent..." agent_id=agent002 signal=terminated
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="Context cancelled, stopping ChunkServer listener..." agent_id=agent002
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="Heartbeat loop stopping." agent_id=agent002
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="Agent shutting down main process..." agent_id=agent002
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="Closed agent connection to orchestrator." agent_id=agent002 subcomponent=agent_orch_comms
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="ChunkServer listener accept loop ending." agent_id=agent002 reason="context canceled"
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="ChunkServer Start goroutine finished." agent_id=agent002
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="Agent shutdown complete." agent_id=agent002
time=2025-06-16T09:29:47.949+02:00 level=INFO msg="Closed agent connection to orchestrator." agent_id=agent002 subcomponent=agent_orch_comms


# ===== FILE: logs/orchestrator.log =====
time=2025-06-16T09:29:36.625+02:00 level=INFO source=/home/bradley/work/qwrap/cmd/orchestrator/main.go:60 msg="qwrap orchestrator starting..." listen_addr=localhost:7878 log_level=DEBUG
time=2025-06-16T09:29:36.625+02:00 level=WARN source=/home/bradley/work/qwrap/cmd/orchestrator/main.go:166 msg="No TLS cert/key files provided for Orchestrator, generating self-signed certificate (INSECURE, FOR TESTING ONLY)"
time=2025-06-16T09:29:36.787+02:00 level=INFO source=/home/bradley/work/qwrap/cmd/orchestrator/main.go:200 msg="Saved self-signed orchestrator certificate to orchestrator-selfsigned.crt and orchestrator-selfsigned.key"
time=2025-06-16T09:29:36.788+02:00 level=INFO source=/home/bradley/work/qwrap/cmd/orchestrator/main.go:83 msg="StateManager initialized (in-memory)"
time=2025-06-16T09:29:36.788+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/scheduler/scheduler.go:330 msg="Starting scheduler background tasks..." subsystem=scheduler
time=2025-06-16T09:29:36.788+02:00 level=INFO source=/home/bradley/work/qwrap/cmd/orchestrator/main.go:95 msg="Scheduler initialized and background tasks started"
time=2025-06-16T09:29:36.788+02:00 level=WARN source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:58 msg="AgentClientTLSConfig not provided, creating a default one (likely insecure for production)." subsystem=quic_server
time=2025-06-16T09:29:36.788+02:00 level=INFO source=/home/bradley/work/qwrap/cmd/orchestrator/main.go:128 msg="Orchestrator server attempting to start..."
time=2025-06-16T09:29:36.788+02:00 level=INFO source=:0 msg="failed to sufficiently increase receive buffer size (was: 208 kiB, wanted: 7168 kiB, got: 416 kiB). See https://github.com/quic-go/quic-go/wiki/UDP-Buffer-Sizes for details."
time=2025-06-16T09:29:36.788+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:148 msg="OrchestratorServer started" subsystem=quic_server address=127.0.0.1:7878
time=2025-06-16T09:29:42.030+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:181 msg="Orchestrator accepted new QUIC connection" subsystem=quic_server remote_addr=127.0.0.1:35686
time=2025-06-16T09:29:42.030+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:223 msg="Orchestrator handling connection" subsystem=quic_server remote_addr=127.0.0.1:35686
time=2025-06-16T09:29:42.031+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:242 msg="Orchestrator accepted new stream" subsystem=quic_server remote_addr=127.0.0.1:35686 stream_id=0
time=2025-06-16T09:29:42.031+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/framing/framing.go:193 msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" subsystem=quic_server remote_addr=127.0.0.1:35686 stream_id=0
time=2025-06-16T09:29:42.031+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:283 msg="Received StreamPurposeRequest" subsystem=quic_server remote_addr=127.0.0.1:35686 stream_id=0 purpose=AGENT_REGISTRATION plan_id_context=""
time=2025-06-16T09:29:42.031+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:731 msg="Processing AgentRegistrationRequest" subsystem=quic_server handler=AgentRegistration stream_id=0 remote_addr=127.0.0.1:35686 agent_id=agent001 address_provided=127.0.0.1:8080 capabilities=[storage_local]
time=2025-06-16T09:29:42.031+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/scheduler/scheduler.go:48 msg="Registering or updating agent" subsystem=scheduler agent_id=agent001 address=127.0.0.1:8080
time=2025-06-16T09:29:42.031+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/scheduler/scheduler.go:54 msg="New agent registered" subsystem=scheduler agent_id=agent001
time=2025-06-16T09:29:42.031+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:764 msg="AgentRegistrationResponse sent" subsystem=quic_server handler=AgentRegistration stream_id=0 remote_addr=127.0.0.1:35686 agent_id=agent001 success=true
time=2025-06-16T09:29:42.031+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:766 msg="-> Suggested heartbeat interval" subsystem=quic_server handler=AgentRegistration stream_id=0 remote_addr=127.0.0.1:35686 seconds=10
time=2025-06-16T09:29:43.192+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:181 msg="Orchestrator accepted new QUIC connection" subsystem=quic_server remote_addr=127.0.0.1:50947
time=2025-06-16T09:29:43.193+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:223 msg="Orchestrator handling connection" subsystem=quic_server remote_addr=127.0.0.1:50947
time=2025-06-16T09:29:43.193+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:242 msg="Orchestrator accepted new stream" subsystem=quic_server remote_addr=127.0.0.1:50947 stream_id=0
time=2025-06-16T09:29:43.193+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/framing/framing.go:193 msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" subsystem=quic_server remote_addr=127.0.0.1:50947 stream_id=0
time=2025-06-16T09:29:43.193+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:283 msg="Received StreamPurposeRequest" subsystem=quic_server remote_addr=127.0.0.1:50947 stream_id=0 purpose=AGENT_REGISTRATION plan_id_context=""
time=2025-06-16T09:29:43.193+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:731 msg="Processing AgentRegistrationRequest" subsystem=quic_server handler=AgentRegistration stream_id=0 remote_addr=127.0.0.1:50947 agent_id=agent002 address_provided=127.0.0.1:8081 capabilities=[storage_local]
time=2025-06-16T09:29:43.193+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/scheduler/scheduler.go:48 msg="Registering or updating agent" subsystem=scheduler agent_id=agent002 address=127.0.0.1:8081
time=2025-06-16T09:29:43.193+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/scheduler/scheduler.go:54 msg="New agent registered" subsystem=scheduler agent_id=agent002
time=2025-06-16T09:29:43.193+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:764 msg="AgentRegistrationResponse sent" subsystem=quic_server handler=AgentRegistration stream_id=0 remote_addr=127.0.0.1:50947 agent_id=agent002 success=true
time=2025-06-16T09:29:43.193+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:766 msg="-> Suggested heartbeat interval" subsystem=quic_server handler=AgentRegistration stream_id=0 remote_addr=127.0.0.1:50947 seconds=10
time=2025-06-16T09:29:44.028+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:181 msg="Orchestrator accepted new QUIC connection" subsystem=quic_server remote_addr=127.0.0.1:50389
time=2025-06-16T09:29:44.028+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:223 msg="Orchestrator handling connection" subsystem=quic_server remote_addr=127.0.0.1:50389
time=2025-06-16T09:29:44.028+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:242 msg="Orchestrator accepted new stream" subsystem=quic_server remote_addr=127.0.0.1:50389 stream_id=0
time=2025-06-16T09:29:44.028+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/framing/framing.go:193 msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" subsystem=quic_server remote_addr=127.0.0.1:50389 stream_id=0
time=2025-06-16T09:29:44.028+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:283 msg="Received StreamPurposeRequest" subsystem=quic_server remote_addr=127.0.0.1:50389 stream_id=0 purpose=AGENT_REGISTRATION plan_id_context=""
time=2025-06-16T09:29:44.028+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:731 msg="Processing AgentRegistrationRequest" subsystem=quic_server handler=AgentRegistration stream_id=0 remote_addr=127.0.0.1:50389 agent_id=agent003 address_provided=127.0.0.1:8082 capabilities=[storage_local]
time=2025-06-16T09:29:44.028+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/scheduler/scheduler.go:48 msg="Registering or updating agent" subsystem=scheduler agent_id=agent003 address=127.0.0.1:8082
time=2025-06-16T09:29:44.028+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/scheduler/scheduler.go:54 msg="New agent registered" subsystem=scheduler agent_id=agent003
time=2025-06-16T09:29:44.028+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:764 msg="AgentRegistrationResponse sent" subsystem=quic_server handler=AgentRegistration stream_id=0 remote_addr=127.0.0.1:50389 agent_id=agent003 success=true
time=2025-06-16T09:29:44.028+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:766 msg="-> Suggested heartbeat interval" subsystem=quic_server handler=AgentRegistration stream_id=0 remote_addr=127.0.0.1:50389 seconds=10
time=2025-06-16T09:29:47.803+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:181 msg="Orchestrator accepted new QUIC connection" subsystem=quic_server remote_addr=127.0.0.1:33448
time=2025-06-16T09:29:47.803+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:223 msg="Orchestrator handling connection" subsystem=quic_server remote_addr=127.0.0.1:33448
time=2025-06-16T09:29:47.804+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:242 msg="Orchestrator accepted new stream" subsystem=quic_server remote_addr=127.0.0.1:33448 stream_id=0
time=2025-06-16T09:29:47.804+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/framing/framing.go:193 msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" subsystem=quic_server remote_addr=127.0.0.1:33448 stream_id=0
time=2025-06-16T09:29:47.804+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:283 msg="Received StreamPurposeRequest" subsystem=quic_server remote_addr=127.0.0.1:33448 stream_id=0 purpose=TRANSFER_REQUEST plan_id_context=""
time=2025-06-16T09:29:47.804+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:477 msg="Processing TransferRequest" subsystem=quic_server handler=TransferRequest stream_id=0 remote_addr=127.0.0.1:33448 request_id=client-req-1750058987802649306 num_files=1
time=2025-06-16T09:29:47.804+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:310 msg="Attempting to discover file metadata by querying agents" subsystem=quic_server op=discoverFileMetadata file_id=testfile_10M.dat
time=2025-06-16T09:29:47.805+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:348 msg="Querying agent for metadata" subsystem=quic_server op=discoverFileMetadata file_id=testfile_10M.dat target_agent_id=agent001 target_agent_addr=127.0.0.1:8080
time=2025-06-16T09:29:47.805+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:348 msg="Querying agent for metadata" subsystem=quic_server op=discoverFileMetadata file_id=testfile_10M.dat target_agent_id=agent003 target_agent_addr=127.0.0.1:8082
time=2025-06-16T09:29:47.805+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:348 msg="Querying agent for metadata" subsystem=quic_server op=discoverFileMetadata file_id=testfile_10M.dat target_agent_id=agent002 target_agent_addr=127.0.0.1:8081
time=2025-06-16T09:29:47.812+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/framing/framing.go:193 msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" subsystem=quic_server op=discoverFileMetadata file_id=testfile_10M.dat target_agent_id=agent001 target_agent_addr=127.0.0.1:8080
time=2025-06-16T09:29:47.815+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/framing/framing.go:193 msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" subsystem=quic_server op=discoverFileMetadata file_id=testfile_10M.dat target_agent_id=agent003 target_agent_addr=127.0.0.1:8082
time=2025-06-16T09:29:47.815+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/framing/framing.go:193 msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" subsystem=quic_server op=discoverFileMetadata file_id=testfile_10M.dat target_agent_id=agent002 target_agent_addr=127.0.0.1:8081
time=2025-06-16T09:29:47.817+02:00 level=WARN source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:430 msg="Agent reported file not found or metadata invalid" subsystem=quic_server op=discoverFileMetadata file_id=testfile_10M.dat agent_id=agent002 found_flag=false agent_err_msg="File 'testfile_10M.dat' not found on agent agent002"
time=2025-06-16T09:29:47.818+02:00 level=WARN source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:430 msg="Agent reported file not found or metadata invalid" subsystem=quic_server op=discoverFileMetadata file_id=testfile_10M.dat agent_id=agent003 found_flag=false agent_err_msg="File 'testfile_10M.dat' not found on agent agent003"
time=2025-06-16T09:29:47.859+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:416 msg="Received valid metadata from agent" subsystem=quic_server op=discoverFileMetadata file_id=testfile_10M.dat agent_id=agent001 file_id=testfile_10M.dat size=10485760 checksum=10630ea813bf9afb376d98027a5e62a5f723141d7e5597fda35f65c300ba5cd3
time=2025-06-16T09:29:47.859+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:460 msg="Successfully resolved file metadata via agent query" subsystem=quic_server op=discoverFileMetadata file_id=testfile_10M.dat file_id=testfile_10M.dat size=10485760 checksum=10630ea813bf9afb376d98027a5e62a5f723141d7e5597fda35f65c300ba5cd3 source_agent_id=agent001
time=2025-06-16T09:29:47.859+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/state/state_manager.go:74 msg="New transfer state created" subsystem=statemanager plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 client_request_id=client-req-1750058987802649306
time=2025-06-16T09:29:47.859+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:530 msg="Transfer state created in StateManager" subsystem=quic_server handler=TransferRequest stream_id=0 remote_addr=127.0.0.1:33448 plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4
time=2025-06-16T09:29:47.859+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/state/state_manager.go:116 msg="Transfer status updated" subsystem=statemanager plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 old_status=PENDING new_status=PLANNING
time=2025-06-16T09:29:47.859+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/scheduler/scheduler.go:167 msg="Creating transfer plan" subsystem=scheduler plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 file_id=testfile_10M.dat total_size=10485760 num_chunks=10 num_available_agents=3 algorithm=least_loaded
time=2025-06-16T09:29:47.859+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:566 msg="Scheduler created transfer plan successfully" subsystem=quic_server handler=TransferRequest stream_id=0 remote_addr=127.0.0.1:33448 plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 num_assignments=10
time=2025-06-16T09:29:47.859+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/state/state_manager.go:187 msg="Scheduler plan linked to transfer" subsystem=statemanager plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 num_assignments=10
time=2025-06-16T09:29:47.859+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:590 msg="TransferPlan sent successfully to client" subsystem=quic_server handler=TransferRequest stream_id=0 remote_addr=127.0.0.1:33448 plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4
time=2025-06-16T09:29:47.860+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:242 msg="Orchestrator accepted new stream" subsystem=quic_server remote_addr=127.0.0.1:33448 stream_id=4
time=2025-06-16T09:29:47.861+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/framing/framing.go:193 msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" subsystem=quic_server remote_addr=127.0.0.1:33448 stream_id=4
time=2025-06-16T09:29:47.861+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:283 msg="Received StreamPurposeRequest" subsystem=quic_server remote_addr=127.0.0.1:33448 stream_id=4 purpose=REGISTER_FOR_PLAN_UPDATES plan_id_context=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4
time=2025-06-16T09:29:47.861+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:686 msg="Client stream registered for plan updates" subsystem=quic_server handler=RegisterForPlanUpdates stream_id=4 remote_addr=127.0.0.1:33448 plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4
time=2025-06-16T09:29:47.869+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:242 msg="Orchestrator accepted new stream" subsystem=quic_server remote_addr=127.0.0.1:33448 stream_id=8
time=2025-06-16T09:29:47.869+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:242 msg="Orchestrator accepted new stream" subsystem=quic_server remote_addr=127.0.0.1:33448 stream_id=12
time=2025-06-16T09:29:47.869+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/framing/framing.go:193 msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" subsystem=quic_server remote_addr=127.0.0.1:33448 stream_id=12
time=2025-06-16T09:29:47.869+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/framing/framing.go:193 msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" subsystem=quic_server remote_addr=127.0.0.1:33448 stream_id=8
time=2025-06-16T09:29:47.869+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:283 msg="Received StreamPurposeRequest" subsystem=quic_server remote_addr=127.0.0.1:33448 stream_id=12 purpose=CLIENT_REPORT plan_id_context=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4
time=2025-06-16T09:29:47.869+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:283 msg="Received StreamPurposeRequest" subsystem=quic_server remote_addr=127.0.0.1:33448 stream_id=8 purpose=CLIENT_REPORT plan_id_context=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4
time=2025-06-16T09:29:47.869+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:601 msg="Processing ClientReport" subsystem=quic_server handler=ClientReport stream_id=8 remote_addr=127.0.0.1:33448 plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 num_statuses=1
time=2025-06-16T09:29:47.869+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:601 msg="Processing ClientReport" subsystem=quic_server handler=ClientReport stream_id=12 remote_addr=127.0.0.1:33448 plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 num_statuses=1
time=2025-06-16T09:29:47.869+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/orchestrator/state/state_manager.go:228 msg="Chunk status updated" subsystem=statemanager plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 file_id=testfile_10M.dat chunk_id=0 agent_id=agent001 new_event=REASSIGNMENT_REQUESTED
time=2025-06-16T09:29:47.870+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:619 msg="Failure/Reassignment_Req reported for chunk, notifying scheduler" subsystem=quic_server handler=ClientReport stream_id=8 remote_addr=127.0.0.1:33448 plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 chunk_id=0 agent_id=agent001 event=REASSIGNMENT_REQUESTED
time=2025-06-16T09:29:47.870+02:00 level=WARN source=/home/bradley/work/qwrap/internal/orchestrator/scheduler/scheduler.go:275 msg="Agent failure reported" subsystem=scheduler agent_id=agent001 file_id=testfile_10M.dat chunk_id=0 reason="Max local retries on assignment agent001"
time=2025-06-16T09:29:47.870+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/scheduler/scheduler.go:408 msg="Considering replan for chunk" subsystem=scheduler plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 chunk_id=0 file_id=testfile_10M.dat failed_agent_id=agent001 agent_exists_in_scheduler=true
time=2025-06-16T09:29:47.870+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/orchestrator/state/state_manager.go:228 msg="Chunk status updated" subsystem=statemanager plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 file_id=testfile_10M.dat chunk_id=0 agent_id=agent001 new_event=DOWNLOAD_FAILED_TRANSFER_ERROR
time=2025-06-16T09:29:47.870+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:619 msg="Failure/Reassignment_Req reported for chunk, notifying scheduler" subsystem=quic_server handler=ClientReport stream_id=12 remote_addr=127.0.0.1:33448 plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 chunk_id=0 agent_id=agent001 event=DOWNLOAD_FAILED_TRANSFER_ERROR
time=2025-06-16T09:29:47.870+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/scheduler/scheduler.go:491 msg="Chunk replanned successfully" subsystem=scheduler plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 chunk_id=0 old_agent_id=agent001 new_primary_agent_id=agent003
time=2025-06-16T09:29:47.870+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:641 msg="Chunk replan successful, attempting to reassign in StateManager" subsystem=quic_server handler=ClientReport stream_id=8 remote_addr=127.0.0.1:33448 plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 chunk_id=0 new_primary_agent=agent003
time=2025-06-16T09:29:47.870+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/state/state_manager.go:312 msg="Chunk reassigned" subsystem=statemanager plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 file_id=testfile_10M.dat chunk_id=0 new_primary_agent=agent003 num_replicas=1
time=2025-06-16T09:29:47.870+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:645 msg="Chunk reassigned in StateManager, sending UpdatedTransferPlan" subsystem=quic_server handler=ClientReport stream_id=8 remote_addr=127.0.0.1:33448 plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 chunk_id=0
time=2025-06-16T09:29:47.870+02:00 level=WARN source=/home/bradley/work/qwrap/internal/orchestrator/scheduler/scheduler.go:275 msg="Agent failure reported" subsystem=scheduler agent_id=agent001 file_id=testfile_10M.dat chunk_id=0 reason="incomplete chunk 0 from 127.0.0.1:8080: got 0, want 1048576: EOF"
time=2025-06-16T09:29:47.870+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/scheduler/scheduler.go:408 msg="Considering replan for chunk" subsystem=scheduler plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 chunk_id=0 file_id=testfile_10M.dat failed_agent_id=agent001 agent_exists_in_scheduler=true
time=2025-06-16T09:29:47.870+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/scheduler/scheduler.go:491 msg="Chunk replanned successfully" subsystem=scheduler plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 chunk_id=0 old_agent_id=agent001 new_primary_agent_id=agent002
time=2025-06-16T09:29:47.870+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:641 msg="Chunk replan successful, attempting to reassign in StateManager" subsystem=quic_server handler=ClientReport stream_id=12 remote_addr=127.0.0.1:33448 plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 chunk_id=0 new_primary_agent=agent002
time=2025-06-16T09:29:47.870+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/state/state_manager.go:312 msg="Chunk reassigned" subsystem=statemanager plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 file_id=testfile_10M.dat chunk_id=0 new_primary_agent=agent002 num_replicas=1
time=2025-06-16T09:29:47.870+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:645 msg="Chunk reassigned in StateManager, sending UpdatedTransferPlan" subsystem=quic_server handler=ClientReport stream_id=12 remote_addr=127.0.0.1:33448 plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 chunk_id=0
time=2025-06-16T09:29:47.870+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:839 msg="Successfully sent UpdatedTransferPlan to client" subsystem=quic_server plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 subcomponent=update_sender
time=2025-06-16T09:29:47.870+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:839 msg="Successfully sent UpdatedTransferPlan to client" subsystem=quic_server plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 subcomponent=update_sender
time=2025-06-16T09:29:47.917+02:00 level=INFO source=/home/bradley/work/qwrap/cmd/orchestrator/main.go:76 msg="Received signal, shutting down orchestrator..." signal=terminated
time=2025-06-16T09:29:47.917+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/scheduler/scheduler.go:343 msg="Agent cleanup loop stopping due to context cancellation." subsystem=scheduler
time=2025-06-16T09:29:47.917+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:157 msg="OrchestratorServer context cancelled, stopping listener..." subsystem=quic_server
time=2025-06-16T09:29:47.917+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:707 msg="Removed client update stream from map due to context done" subsystem=quic_server handler=RegisterForPlanUpdates stream_id=4 remote_addr=127.0.0.1:33448 plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4
time=2025-06-16T09:29:47.917+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:716 msg="handleRegisterForPlanUpdates finished and stream context cancelled" subsystem=quic_server handler=RegisterForPlanUpdates stream_id=4 remote_addr=127.0.0.1:33448 plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4 plan_id=plan-d2a82508-d1a2-45dc-af25-28079de2e5c4
time=2025-06-16T09:29:47.917+02:00 level=INFO source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:174 msg="Orchestrator listener accept loop ending" subsystem=quic_server reason="context canceled"
time=2025-06-16T09:29:47.917+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:234 msg="Connection closed or context cancelled (orchestrator handleConnection)" subsystem=quic_server remote_addr=127.0.0.1:33448 error="context canceled"
time=2025-06-16T09:29:47.917+02:00 level=INFO source=/home/bradley/work/qwrap/cmd/orchestrator/main.go:142 msg="Orchestrator server Start() returned, waiting for context cancellation to exit main..."
time=2025-06-16T09:29:47.917+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:234 msg="Connection closed or context cancelled (orchestrator handleConnection)" subsystem=quic_server remote_addr=127.0.0.1:35686 error="context canceled"
time=2025-06-16T09:29:47.917+02:00 level=DEBUG source=/home/bradley/work/qwrap/internal/orchestrator/server/server.go:234 msg="Connection closed or context cancelled (orchestrator handleConnection)" subsystem=quic_server remote_addr=127.0.0.1:50947 error="context canceled"
time=2025-06-16T09:29:47.917+02:00 level=INFO source=/home/bradley/work/qwrap/cmd/orchestrator/main.go:146 msg="Orchestrator main process shutting down..."
time=2025-06-16T09:29:47.917+02:00 level=INFO source=/home/bradley/work/qwrap/cmd/orchestrator/main.go:150 msg="Orchestrator shutdown complete."


