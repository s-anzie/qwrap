time=2025-06-17T14:54:42.288+02:00 level=INFO source=/home/bradley/work/qwrap-ws/cmd/orchestrator/main.go:61 msg="qwrap orchestrator starting..." listen_addr=localhost:7878 log_level=DEBUG
time=2025-06-17T14:54:42.288+02:00 level=WARN source=/home/bradley/work/qwrap-ws/cmd/orchestrator/main.go:180 msg="No TLS cert/key files provided for Orchestrator, generating self-signed certificate (INSECURE, FOR TESTING ONLY)"
time=2025-06-17T14:54:42.476+02:00 level=INFO source=/home/bradley/work/qwrap-ws/cmd/orchestrator/main.go:214 msg="Saved self-signed orchestrator certificate to orchestrator-selfsigned.crt and orchestrator-selfsigned.key"
time=2025-06-17T14:54:42.486+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/state/state_manager.go:451 msg="Successfully loaded state for transfers from DB" subsystem=statemanager count=0
time=2025-06-17T14:54:42.486+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/state/state_manager.go:60 msg="StateManager initialized with BoltDB persistence" subsystem=statemanager db_path=orchestrator.db
time=2025-06-17T14:54:42.486+02:00 level=INFO source=/home/bradley/work/qwrap-ws/cmd/orchestrator/main.go:97 msg="StateManager initialized"
time=2025-06-17T14:54:42.486+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/scheduler/scheduler.go:323 msg="Starting scheduler background tasks..." subsystem=scheduler
time=2025-06-17T14:54:42.486+02:00 level=INFO source=/home/bradley/work/qwrap-ws/cmd/orchestrator/main.go:109 msg="Scheduler initialized and background tasks started"
time=2025-06-17T14:54:42.486+02:00 level=WARN source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:58 msg="AgentClientTLSConfig not provided, creating a default one (likely insecure for production)." subsystem=quic_server
time=2025-06-17T14:54:42.486+02:00 level=INFO source=/home/bradley/work/qwrap-ws/cmd/orchestrator/main.go:142 msg="Orchestrator server attempting to start..."
time=2025-06-17T14:54:42.487+02:00 level=INFO source=:0 msg="failed to sufficiently increase receive buffer size (was: 208 kiB, wanted: 7168 kiB, got: 416 kiB). See https://github.com/quic-go/quic-go/wiki/UDP-Buffer-Sizes for details."
time=2025-06-17T14:54:42.487+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:148 msg="OrchestratorServer started" subsystem=quic_server address=127.0.0.1:7878
time=2025-06-17T14:54:47.486+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:181 msg="Orchestrator accepted new QUIC connection" subsystem=quic_server remote_addr=127.0.0.1:55019
time=2025-06-17T14:54:47.486+02:00 level=DEBUG source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:223 msg="Orchestrator handling connection" subsystem=quic_server remote_addr=127.0.0.1:55019
time=2025-06-17T14:54:47.486+02:00 level=DEBUG source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:242 msg="Orchestrator accepted new stream" subsystem=quic_server remote_addr=127.0.0.1:55019 stream_id=0
time=2025-06-17T14:54:47.486+02:00 level=DEBUG source=/home/bradley/work/qwrap-ws/internal/framing/framing.go:193 msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" subsystem=quic_server remote_addr=127.0.0.1:55019 stream_id=0
time=2025-06-17T14:54:47.486+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:283 msg="Received StreamPurposeRequest" subsystem=quic_server remote_addr=127.0.0.1:55019 stream_id=0 purpose=AGENT_REGISTRATION plan_id_context=""
time=2025-06-17T14:54:47.486+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:736 msg="Processing AgentRegistrationRequest" subsystem=quic_server handler=AgentRegistration stream_id=0 remote_addr=127.0.0.1:55019 agent_id=agent001 address_provided=127.0.0.1:8080 capabilities=[storage_local]
time=2025-06-17T14:54:47.486+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/scheduler/scheduler.go:48 msg="Registering or updating agent" subsystem=scheduler agent_id=agent001 address=127.0.0.1:8080
time=2025-06-17T14:54:47.486+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/scheduler/scheduler.go:54 msg="New agent registered" subsystem=scheduler agent_id=agent001
time=2025-06-17T14:54:47.486+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:769 msg="AgentRegistrationResponse sent" subsystem=quic_server handler=AgentRegistration stream_id=0 remote_addr=127.0.0.1:55019 agent_id=agent001 success=true
time=2025-06-17T14:54:47.486+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:771 msg="-> Suggested heartbeat interval" subsystem=quic_server handler=AgentRegistration stream_id=0 remote_addr=127.0.0.1:55019 seconds=10
time=2025-06-17T14:54:49.019+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:181 msg="Orchestrator accepted new QUIC connection" subsystem=quic_server remote_addr=127.0.0.1:43805
time=2025-06-17T14:54:49.019+02:00 level=DEBUG source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:223 msg="Orchestrator handling connection" subsystem=quic_server remote_addr=127.0.0.1:43805
time=2025-06-17T14:54:49.019+02:00 level=DEBUG source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:242 msg="Orchestrator accepted new stream" subsystem=quic_server remote_addr=127.0.0.1:43805 stream_id=0
time=2025-06-17T14:54:49.019+02:00 level=DEBUG source=/home/bradley/work/qwrap-ws/internal/framing/framing.go:193 msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" subsystem=quic_server remote_addr=127.0.0.1:43805 stream_id=0
time=2025-06-17T14:54:49.019+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:283 msg="Received StreamPurposeRequest" subsystem=quic_server remote_addr=127.0.0.1:43805 stream_id=0 purpose=AGENT_REGISTRATION plan_id_context=""
time=2025-06-17T14:54:49.019+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:736 msg="Processing AgentRegistrationRequest" subsystem=quic_server handler=AgentRegistration stream_id=0 remote_addr=127.0.0.1:43805 agent_id=agent002 address_provided=127.0.0.1:8081 capabilities=[storage_local]
time=2025-06-17T14:54:49.019+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/scheduler/scheduler.go:48 msg="Registering or updating agent" subsystem=scheduler agent_id=agent002 address=127.0.0.1:8081
time=2025-06-17T14:54:49.019+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/scheduler/scheduler.go:54 msg="New agent registered" subsystem=scheduler agent_id=agent002
time=2025-06-17T14:54:49.019+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:769 msg="AgentRegistrationResponse sent" subsystem=quic_server handler=AgentRegistration stream_id=0 remote_addr=127.0.0.1:43805 agent_id=agent002 success=true
time=2025-06-17T14:54:49.019+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:771 msg="-> Suggested heartbeat interval" subsystem=quic_server handler=AgentRegistration stream_id=0 remote_addr=127.0.0.1:43805 seconds=10
time=2025-06-17T14:54:49.690+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:181 msg="Orchestrator accepted new QUIC connection" subsystem=quic_server remote_addr=127.0.0.1:51802
time=2025-06-17T14:54:49.690+02:00 level=DEBUG source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:223 msg="Orchestrator handling connection" subsystem=quic_server remote_addr=127.0.0.1:51802
time=2025-06-17T14:54:49.691+02:00 level=DEBUG source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:242 msg="Orchestrator accepted new stream" subsystem=quic_server remote_addr=127.0.0.1:51802 stream_id=0
time=2025-06-17T14:54:49.691+02:00 level=DEBUG source=/home/bradley/work/qwrap-ws/internal/framing/framing.go:193 msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" subsystem=quic_server remote_addr=127.0.0.1:51802 stream_id=0
time=2025-06-17T14:54:49.691+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:283 msg="Received StreamPurposeRequest" subsystem=quic_server remote_addr=127.0.0.1:51802 stream_id=0 purpose=AGENT_REGISTRATION plan_id_context=""
time=2025-06-17T14:54:49.691+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:736 msg="Processing AgentRegistrationRequest" subsystem=quic_server handler=AgentRegistration stream_id=0 remote_addr=127.0.0.1:51802 agent_id=agent003 address_provided=127.0.0.1:8082 capabilities=[storage_local]
time=2025-06-17T14:54:49.691+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/scheduler/scheduler.go:48 msg="Registering or updating agent" subsystem=scheduler agent_id=agent003 address=127.0.0.1:8082
time=2025-06-17T14:54:49.691+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/scheduler/scheduler.go:54 msg="New agent registered" subsystem=scheduler agent_id=agent003
time=2025-06-17T14:54:49.691+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:769 msg="AgentRegistrationResponse sent" subsystem=quic_server handler=AgentRegistration stream_id=0 remote_addr=127.0.0.1:51802 agent_id=agent003 success=true
time=2025-06-17T14:54:49.691+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:771 msg="-> Suggested heartbeat interval" subsystem=quic_server handler=AgentRegistration stream_id=0 remote_addr=127.0.0.1:51802 seconds=10
time=2025-06-17T14:54:53.417+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:181 msg="Orchestrator accepted new QUIC connection" subsystem=quic_server remote_addr=127.0.0.1:41624
time=2025-06-17T14:54:53.417+02:00 level=DEBUG source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:223 msg="Orchestrator handling connection" subsystem=quic_server remote_addr=127.0.0.1:41624
time=2025-06-17T14:54:53.418+02:00 level=DEBUG source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:242 msg="Orchestrator accepted new stream" subsystem=quic_server remote_addr=127.0.0.1:41624 stream_id=0
time=2025-06-17T14:54:53.418+02:00 level=DEBUG source=/home/bradley/work/qwrap-ws/internal/framing/framing.go:193 msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" subsystem=quic_server remote_addr=127.0.0.1:41624 stream_id=0
time=2025-06-17T14:54:53.418+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:283 msg="Received StreamPurposeRequest" subsystem=quic_server remote_addr=127.0.0.1:41624 stream_id=0 purpose=TRANSFER_REQUEST plan_id_context=""
time=2025-06-17T14:54:53.418+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:482 msg="Processing TransferRequest" subsystem=quic_server handler=TransferRequest stream_id=0 remote_addr=127.0.0.1:41624 request_id=client-req-1750164893417459518 num_files=1
time=2025-06-17T14:54:53.418+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:310 msg="Attempting to discover file metadata by querying agents" subsystem=quic_server op=discoverFileMetadata file_id=null
time=2025-06-17T14:54:53.418+02:00 level=DEBUG source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:348 msg="Querying agent for metadata" subsystem=quic_server op=discoverFileMetadata file_id=null target_agent_id=agent003 target_agent_addr=127.0.0.1:8082
time=2025-06-17T14:54:53.418+02:00 level=DEBUG source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:348 msg="Querying agent for metadata" subsystem=quic_server op=discoverFileMetadata file_id=null target_agent_id=agent002 target_agent_addr=127.0.0.1:8081
time=2025-06-17T14:54:53.418+02:00 level=DEBUG source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:348 msg="Querying agent for metadata" subsystem=quic_server op=discoverFileMetadata file_id=null target_agent_id=agent001 target_agent_addr=127.0.0.1:8080
time=2025-06-17T14:54:53.423+02:00 level=DEBUG source=/home/bradley/work/qwrap-ws/internal/framing/framing.go:193 msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" subsystem=quic_server op=discoverFileMetadata file_id=null target_agent_id=agent003 target_agent_addr=127.0.0.1:8082
time=2025-06-17T14:54:53.423+02:00 level=DEBUG source=/home/bradley/work/qwrap-ws/internal/framing/framing.go:193 msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" subsystem=quic_server op=discoverFileMetadata file_id=null target_agent_id=agent001 target_agent_addr=127.0.0.1:8080
time=2025-06-17T14:54:53.423+02:00 level=DEBUG source=/home/bradley/work/qwrap-ws/internal/framing/framing.go:193 msg="Input reader is not an io.ByteReader, wrapping with bufio.Reader" subsystem=quic_server op=discoverFileMetadata file_id=null target_agent_id=agent002 target_agent_addr=127.0.0.1:8081
time=2025-06-17T14:54:53.424+02:00 level=WARN source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:436 msg="Agent reported file not found or metadata invalid" subsystem=quic_server op=discoverFileMetadata file_id=null agent_id=agent003 found_flag=false agent_err_msg="File not found on agent"
time=2025-06-17T14:54:53.424+02:00 level=WARN source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:436 msg="Agent reported file not found or metadata invalid" subsystem=quic_server op=discoverFileMetadata file_id=null agent_id=agent002 found_flag=false agent_err_msg="File not found on agent"
time=2025-06-17T14:54:53.424+02:00 level=WARN source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:436 msg="Agent reported file not found or metadata invalid" subsystem=quic_server op=discoverFileMetadata file_id=null agent_id=agent001 found_flag=false agent_err_msg="File not found on agent"
time=2025-06-17T14:54:53.424+02:00 level=ERROR source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:448 msg="failed to discover valid metadata for 'null' from any agent. Agent reports: agent agent003: File not found on agent; agent agent002: File not found on agent; agent agent001: File not found on agent" subsystem=quic_server op=discoverFileMetadata file_id=null
time=2025-06-17T14:54:53.424+02:00 level=ERROR source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:500 msg="Failed to resolve file metadata by orchestrator" subsystem=quic_server handler=TransferRequest stream_id=0 remote_addr=127.0.0.1:41624 file_id=null error="failed to discover valid metadata for 'null' from any agent. Agent reports: agent agent003: File not found on agent; agent agent002: File not found on agent; agent agent001: File not found on agent"
time=2025-06-17T14:54:53.457+02:00 level=INFO source=/home/bradley/work/qwrap-ws/cmd/orchestrator/main.go:77 msg="Received signal, shutting down orchestrator..." signal=terminated
time=2025-06-17T14:54:53.457+02:00 level=DEBUG source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:234 msg="Connection closed or context cancelled (orchestrator handleConnection)" subsystem=quic_server remote_addr=127.0.0.1:51802 error="context canceled"
time=2025-06-17T14:54:53.457+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/scheduler/scheduler.go:336 msg="Agent cleanup loop stopping due to context cancellation." subsystem=scheduler
time=2025-06-17T14:54:53.457+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:174 msg="Orchestrator listener accept loop ending" subsystem=quic_server reason="context canceled"
time=2025-06-17T14:54:53.457+02:00 level=INFO source=/home/bradley/work/qwrap-ws/cmd/orchestrator/main.go:156 msg="Orchestrator server Start() returned, waiting for context cancellation to exit main..."
time=2025-06-17T14:54:53.457+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:157 msg="OrchestratorServer context cancelled, stopping listener..." subsystem=quic_server
time=2025-06-17T14:54:53.457+02:00 level=INFO source=/home/bradley/work/qwrap-ws/cmd/orchestrator/main.go:160 msg="Orchestrator main process shutting down..."
time=2025-06-17T14:54:53.457+02:00 level=DEBUG source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:234 msg="Connection closed or context cancelled (orchestrator handleConnection)" subsystem=quic_server remote_addr=127.0.0.1:55019 error="context canceled"
time=2025-06-17T14:54:53.457+02:00 level=DEBUG source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:234 msg="Connection closed or context cancelled (orchestrator handleConnection)" subsystem=quic_server remote_addr=127.0.0.1:43805 error="context canceled"
time=2025-06-17T14:54:53.457+02:00 level=INFO source=/home/bradley/work/qwrap-ws/cmd/orchestrator/main.go:164 msg="Orchestrator shutdown complete."
time=2025-06-17T14:54:53.457+02:00 level=INFO source=/home/bradley/work/qwrap-ws/cmd/orchestrator/main.go:92 msg="Closing StateManager..."
time=2025-06-17T14:54:53.457+02:00 level=INFO source=/home/bradley/work/qwrap-ws/internal/orchestrator/state/state_manager.go:70 msg="Closing BoltDB database." subsystem=statemanager
time=2025-06-17T14:54:53.457+02:00 level=DEBUG source=/home/bradley/work/qwrap-ws/internal/orchestrator/server/server.go:234 msg="Connection closed or context cancelled (orchestrator handleConnection)" subsystem=quic_server remote_addr=127.0.0.1:41624 error="context canceled"
